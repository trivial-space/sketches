var E=Object.defineProperty;var k=(t,o,e)=>o in t?E(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e;var i=(t,o,e)=>(k(t,typeof o!="symbol"?o+"":o,e),e);import"./modulepreload-polyfill.b7f2da20.js";import{i as L}from"./perspectiveViewport.0dcf679b.js";import{g as I,d as D,b as g}from"./painterState.2081fc22.js";import{a as R,s as T}from"./frameLoop.4c9b21ff.js";import{a as V}from"./lines.d75a440f.js";import{a as q}from"./points.c0fbbf77.js";import{c as x}from"./mirror-scene.d1c1d204.js";import{p as z}from"./core.b58d4e59.js";import{m as f,s as A,l as b,d as l,v,a as h}from"./vectors.212c15dd.js";import"./camera.94126e27.js";import"./pointer.1f73fbf8.js";import"./vendor.86045b5f.js";import"./ast.22bf2736.js";import"./quad.93433895.js";import"./primitives.6d8411f1.js";import"./core.f107e89c.js";import"./blur.d5b889bc.js";import"./stackgl.1871bf40.js";const B=document.getElementById("canvas"),a=I(B),y=[];function C(t,o,e,s){const n=A(s,e,y),r=b(n),S=l(r,n,y);return f((t-r)*o,S)}const Q=[];function W(t,o){const e=b(o);let s=o;return e!=1&&(s=l(e,o,Q)),f(t,s)}class Y{constructor(){i(this,"pos");i(this,"vel");i(this,"force");i(this,"mass",1);i(this,"damping",1)}applyForce(o){const{force:e}=this;h(e,o,e)}accelerate(){const{vel:o,pos:e,force:s,mass:n,damping:r}=this;n!==1&&l(n,s,s),h(o,s,o),r!==1&&f(r,o,o),h(e,o,e),f(0,s,s)}}function j({pos:t,vel:o,force:e,mass:s=1,damping:n=1}){const r=new Y;return r.pos=v(t||[0,0,0]),r.vel=v(o||[0,0,0]),r.force=v(e||[0,0,0]),r.mass=s,r.damping=n,r}const c=j({pos:[10,50,0],damping:1,mass:10}),p=j({pos:[20,50,0],damping:1}),m=j({pos:[30,50,0],damping:1}),P=[0,50,0],w=[c,p,m],Z=W(.001,[0,-1,0]),G=.1,H=10,d=z(C,H,G);function J(t){const o=Math.floor(t/4);D(K,o)}function K(){w.forEach(t=>t.applyForce(Z)),c.applyForce(d(P,c.pos)),c.applyForce(d(p.pos,c.pos)),p.applyForce(d(c.pos,p.pos)),p.applyForce(d(m.pos,p.pos)),m.applyForce(d(p.pos,m.pos)),w.forEach(t=>t.accelerate())}L(a,{moveSpeed:10,fovy:Math.PI*.6,position:[0,30,-30],rotationY:Math.PI});const u=V(a,"lines",{lineWidth:.5,scalePerspective:!0,projectionMat:a.state.viewPort.camera.projectionMat,viewMat:a.state.viewPort.camera.viewMat,color:[Math.random(),Math.random(),Math.random(),1],dynamicForm:!0}),F=q(a,"points",{pointSize:2,scalePerspective:!0,projectionMat:a.state.viewPort.camera.projectionMat,viewMat:a.state.viewPort.camera.viewMat,color:[Math.random(),Math.random(),Math.random(),1],dynamicForm:!0}),M=x(a,[u.sketch,F.sketch]);R(t=>{a.state.device.tpf=t,a.emit(g.FRAME),J(t),u.update({points:[P,c.pos,p.pos,m.pos]}),F.update({positions:[c.pos,p.pos,m.pos]}),a.painter.compose(M.mirrorScene,M.scene).show(M.scene)},"loop");a.listen("",g.RESIZE,t=>u.update());T();

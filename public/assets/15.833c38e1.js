var j=Object.defineProperty;var g=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var h=(s,t,o)=>t in s?j(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,u=(s,t)=>{for(var o in t||(t={}))A.call(t,o)&&h(s,o,t[o]);if(g)for(var o of g(t))v.call(t,o)&&h(s,o,t[o]);return s};import"./modulepreload-polyfill.b7f2da20.js";import{g as E,b as k}from"./painterState.2081fc22.js";import{g as x}from"./texture-helpers.e15866c2.js";import{a as C}from"./lines_2d.3b9663ff.js";import{a as L,b as w}from"./brushStrokeLineShader.67fdfe63.js";import{m as F}from"./brushStrokes.ff16d99d.js";import"./pointer.1f73fbf8.js";import"./noise.095b1379.js";import"./vectors.212c15dd.js";import"./core.f107e89c.js";import"./core.b58d4e59.js";import"./ast.22bf2736.js";import"./vendor.86045b5f.js";import"./curves.71ebbb82.js";const N=document.getElementById("canvas"),e=E(N),R=u({},k),T=e.getShade("line").update({vert:L,frag:w}),_=e.getLayer("noiseTex").update({texture:x({width:256,height:256,startX:3,startY:3,data:{magFilter:"LINEAR",minFilter:"LINEAR",wrap:"REPEAT"}})}),r=e.getLayer("scene").update({drawSettings:{clearBits:0,clearColor:[1,1,1,1],enable:[e.gl.BLEND],blendFuncSeparate:[e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA,e.gl.SRC_ALPHA,e.gl.ONE]}});e.listen("index",R.RESIZE,()=>{const s=e.gl.drawingBufferWidth,t=e.gl.drawingBufferHeight;r.update({uniforms:{noiseTex:_.image(),size:[s,t],color:[.1,.5,.3],edgeSharpness:5,texScale:[8,.1]},sketches:[e.getEffect("").update({frag:"precision mediump float; void main(void) {gl_FragColor = vec4(1.0 );}"})]}),e.painter.compose(r).show(r);const o=s*.8,c=t*.6,m=(s-o)/2,d=(t-c)/2,b=F({width:o,height:c,left:m,top:d,steps:4,curveHeight:200,offsetX:m,offsetY:d/4,strokePointCount:30}),l=C(b,{lineWidth:50,storeType:"DYNAMIC",smouthCount:0,splitAfterLength:10});let a=0,p=l.length;console.log(p);function f(){if(a<p){const S=l[a].map((i,n)=>e.getForm("form"+n).update(i)).map((i,n)=>e.getSketch("line"+n).update({form:i,shade:T}));r.update({sketches:S}),e.painter.compose(r).show(r),a++,requestAnimationFrame(f)}}f()});

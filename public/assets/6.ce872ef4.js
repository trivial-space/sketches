var D=Object.defineProperty;var h=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var j=(a,e,t)=>e in a?D(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,b=(a,e)=>{for(var t in e||(e={}))I.call(e,t)&&j(a,t,e[t]);if(h)for(var t of h(e))L.call(e,t)&&j(a,t,e[t]);return a};import"./modulepreload-polyfill.b7f2da20.js";import{g as R,b as x,m as U}from"./painterState.2081fc22.js";import{c as P,n as f,s as V,l as _}from"./lines_2d.3b9663ff.js";import{B as S}from"./pointer.1f73fbf8.js";import{a as A,g as G}from"./ast.22bf2736.js";import{j as w,k as v,o as N,u as W,l as y,n as u,w as E,x as Y,y as $,z as H,A as O,D as Q,M as X}from"./vendor.86045b5f.js";import"./vectors.212c15dd.js";import"./core.f107e89c.js";import"./core.b58d4e59.js";const Z=document.getElementById("canvas"),s=R(Z),q=b({},x),F=A(),z=G();let i,B,C,k;const J=z(w([B=v("vec2","position"),C=v("vec2","uv"),i=N("vec2","vUv"),k=W("vec2","uSize"),y(()=>[u(i,C),u(z.gl_Position,E(Y(H(O(B,k)),$(1,-1)),0,1))])])),K=F(w([i=v("vec2","vUv"),y(()=>[u(F.gl_FragColor,E(X(i),Q(i),1,1))])]));s.state.device.sizeMultiplier=window.devicePixelRatio;const c=40,M={};let o=P(M).append(f([0,0],c)),T=[];const ee=s.getShade("shade").update({frag:K,vert:J}),l=s.getLayer("scene").update({drawSettings:{clearColor:[.8,.8,1,1],clearBits:U(s.gl,"color")},directRender:!0});let p=!1,n=[0,0];s.listen("index",x.POINTER,a=>{var t;const e=a.device.pointer;if(e.dragging){const r=s.state.device.sizeMultiplier;if(p){const d=f([n[0]-e.drag.x*r,n[1]-e.drag.y*r],c);o==null||o.append(d,!0),V((t=o.last)==null?void 0:t.prev,{depth:2}),T=_(o,{lineWidth:c,storeType:"DYNAMIC"}).map((g,m)=>s.getForm("line"+m).update(g)).map((g,m)=>s.getSketch("sketch"+m).update({form:g,shade:ee})),l.update({sketches:T,uniforms:{uSize:[s.gl.drawingBufferWidth,s.gl.drawingBufferHeight]}}),s.painter.compose(l)}else{p=!0,n=[e.pressed[S.LEFT].clientX*r,e.pressed[S.LEFT].clientY*r];const d=f([n[0],n[1]],c);o=P(M).append(d)}}else!e.dragging&&p&&(p=!1)});s.listen("index",q.RESIZE,()=>{l.update(),s.painter.compose(l)});

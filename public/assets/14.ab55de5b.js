var re=Object.defineProperty;var U=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var $=(s,t,e)=>t in s?re(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,w=(s,t)=>{for(var e in t||(t={}))ie.call(t,e)&&$(s,e,t[e]);if(U)for(var e of U(t))le.call(t,e)&&$(s,e,t[e]);return s};import"./modulepreload-polyfill.b7f2da20.js";import{g as ce,b as me,f as de,t as fe,e as ue}from"./painterState.2081fc22.js";import{a as ge,g as pe}from"./ast.22bf2736.js";import{j as I,u as N,k as p,o as M,l as O,n as i,w as Y,x as l,A as k,D as C,M as v,B as D,Q as ve,y as V,R as Le,N as E,z as d,$ as be,O as xe,S as j,v as f,L as _,T as X,ac as Ce,V as Ee}from"./vendor.86045b5f.js";import{a as H}from"./noise.095b1379.js";import{c as G,n as je,l as Fe}from"./lines_2d.3b9663ff.js";import{s as he,n as Ae,a as Q,m as W}from"./vectors.212c15dd.js";import{b as Re}from"./curves.71ebbb82.js";import{g as Se}from"./texture-helpers.e15866c2.js";import"./pointer.1f73fbf8.js";import"./core.f107e89c.js";import"./core.b58d4e59.js";const Te=document.getElementById("canvas"),n=ce(Te),Ne=w({},me),Z=ge("precision highp float;"),q=pe();let u,L,F,B,K,J;const _e=q(I([F=N("vec2","size"),B=p("vec2","position"),K=p("float","length"),J=p("vec2","localUv"),u=M("vec2","vUv"),L=M("float","vLength"),O(()=>[i(u,J),i(L,K),i(q.gl_Position,Y(v(B),l(-1,l(k(v(F),C(F)),C(B))),0,1))])]));let ee,b,r;const Be=Z(I([ee=N("sampler2D","noiseTex"),u=p("vec2","vUv"),L=p("float","vLength"),F=N("vec2","size"),O(()=>[b=D(ve(ee,l(V(v(u),L),V(1,.1)))),r=D(Le(E(E(E(d(v(b)),d(C(b))),d(xe(b))),d(be(b))))),i(r,l(1.1,r)),i(r,j(r,f(.1))),i(r,_(r,j(X(d(v(u))),f(10)))),i(r,_(r,j(X(d(C(u))),f(20)))),i(r,l(r,l(_(E(f(1),r),j(Ce(f(1),k(L,10)),f(4))),.5))),i(Z.gl_FragColor,Y(Ee(0,.6,.2),l(.9,r)))])]));function ye(s,t,e){const o=t/e,h=[-s/2,-t/2],A=[s/2,-t/2+o/2],[g,R]=h,[S,T]=A,ne=Math.random()*20,se=Math.random()*20,c=a=>s/8*H(a,ne),m=a=>o/2*H(a,se),oe=de(fe(a=>[y([g+c(a),R+o*a+m(a)],[S+c(a+e),T+o*a+m(a+e)]),y([S+c(a+e),T+o*a+m(a+e)],[g+c(a+1),R+o*(a+1)+m(a+1)],!0)],e)).concat([y([g+c(e),R+t+m(e)],[S+c(e+e),T+t+m(e+e)])]).flat(),P=G();for(const a of oe)P.append(je(a),!0);return P}function y(s,t,e=!1){const o=he(t,s),h=Ae(e?[-o[1],o[0]]:[o[1],-o[0]]),A=Q(W(Math.random()*.4,h),Q(s,W(.5,o)));return ue(.1,1,.1).map(g=>Re(s,A,t,g))}const ze=n.getShade("line").update({vert:_e,frag:Be}),Pe=n.getLayer("noiseTex").update({texture:Se({width:256,height:256,startX:3,startY:3,data:{magFilter:"LINEAR",minFilter:"LINEAR",wrap:"REPEAT"}})}),z=n.getLayer("scene").update({drawSettings:{clearColor:[1,1,1,1],clearBits:n.gl.COLOR_BUFFER_BIT,enable:[n.gl.BLEND,n.gl.CULL_FACE],cullFace:n.gl.BACK,blendFuncSeparate:[n.gl.SRC_ALPHA,n.gl.ONE_MINUS_SRC_ALPHA,n.gl.ZERO,n.gl.ONE]},directRender:!0});n.listen("index",Ne.RESIZE,()=>{z.update({uniforms:{noiseTex:Pe.image(),size:[n.gl.drawingBufferWidth,n.gl.drawingBufferHeight]}}),ae()});const Ue=ye(1.2,.6,4),te=G();let x=Ue.first;function ae(){if(x){te.append(x.val);const t=Fe(te,{lineWidth:.07,storeType:"DYNAMIC",smouthCount:2}).map((e,o)=>n.getForm("form"+o).update(e)).map((e,o)=>n.getSketch("line"+o).update({form:e,shade:ze}));z.update({sketches:t}),n.painter.compose(z),x=x&&x.next,requestAnimationFrame(ae)}}

var x=Object.defineProperty;var m=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var f=(r,t,s)=>t in r?x(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,u=(r,t)=>{for(var s in t||(t={}))v.call(t,s)&&f(r,s,t[s]);if(m)for(var s of m(t))L.call(t,s)&&f(r,s,t[s]);return r};import"./modulepreload-polyfill.b7f2da20.js";import{g as R,b as h,m as T}from"./painterState.2081fc22.js";import{c as b,n as g,l as w}from"./lines_2d.3b9663ff.js";import{B as E}from"./pointer.1f73fbf8.js";import{g as N}from"./texture-helpers.e15866c2.js";import{b as A,a as C}from"./brushStrokeLineShader.67fdfe63.js";import"./vectors.212c15dd.js";import"./core.f107e89c.js";import"./core.b58d4e59.js";import"./noise.095b1379.js";import"./ast.22bf2736.js";import"./vendor.86045b5f.js";const F=document.getElementById("canvas"),e=R(F),P=u({},h);e.state.device.sizeMultiplier=window.devicePixelRatio;const o=50;let a=b().append(g([0,0],o)),S=[];const k=e.getShade("shade").update({frag:A,vert:C}),j=e.getLayer("noiseTex").update({texture:N({width:256,height:256,startX:3,startY:3,data:{magFilter:"LINEAR",minFilter:"LINEAR",wrap:"REPEAT"}})}),n=e.getLayer("scene").update({drawSettings:{clearColor:[1,1,1,1],clearBits:T(e.gl,"color","depth"),enable:[e.gl.BLEND],blendFuncSeparate:[e.gl.SRC_ALPHA,e.gl.ONE_MINUS_SRC_ALPHA,e.gl.ZERO,e.gl.ONE]},directRender:!0});let d=!1,i=[0,0];e.listen("index",h.POINTER,r=>{const t=r.device.pointer;if(t.dragging){const s=e.state.device.sizeMultiplier;if(d){const l=g([i[0]-t.drag.x*s,i[1]-t.drag.y*s],o);a==null||a.append(l,!0),S=w(a,{lineWidth:o,smouthCount:3,storeType:"DYNAMIC"}).map((p,c)=>e.getForm("line"+c).update(p)).map((p,c)=>e.getSketch("sketch"+c).update({form:p,shade:k})),n.update({sketches:S,uniforms:{size:[e.gl.drawingBufferWidth,e.gl.drawingBufferHeight],noiseTex:j.image(),color:[.9,.2,.7],texScale:[10,.1],edgeSharpness:4}}),e.painter.compose(n)}else{d=!0,i=[t.pressed[E.LEFT].clientX*s,t.pressed[E.LEFT].clientY*s];const l=g([i[0],i[1]],o);a=b().append(l)}}else!t.dragging&&d&&(d=!1)});e.listen("index",P.RESIZE,()=>{n.update(),e.painter.compose(n),e.painter.show(j)});
